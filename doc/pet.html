<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (X11; I; SunOS 5.5.1 sun4u) [Netscape]">
   <title>Program Overview:  control</title>
</head>
<body>

<center>
<h1>
Program Overview: control</h1></center>

<hr>
<p>This document provides a description of the control application,
which is used to view and edit Accelerator Device Objects (ADOs), 
Simple Logical Devices (SLDs), Complex Logical Devices (CLDs), 
MetaDevices and Parameters in the C-AD Controls System.  This document focuses
on SLD, CLD, MetaDevices and Parameters pages.  To learn more about ADO style
pages visit the link <a href="/Controls/doc/pet/pet.html">ADO documentation page.</a>
<center><table BORDER=2 CELLPADDING=4 WIDTH="85%" >
<tr>
<td COLSTART="1"></td>

<th>Date&nbsp;</th>

<th>Author&nbsp;</th>

<th>Email&nbsp;</th>
</tr>

<tr>
<th ALIGN=LEFT>Program Created&nbsp;</th>

<td ALIGN=CENTER>5/29/03&nbsp;</td>

<td>Seth Nemesure&nbsp;</td>

<td><a href="mailto:seth@bnl.gov">seth@bnl.gov</a></td>
</tr>

<tr>
<th ALIGN=LEFT>Last Modified&nbsp;</th>

<td ALIGN=CENTER>5/29/03&nbsp;</td>

<td>Seth Nemesure&nbsp;</td>

<td><a href="mailto:seth@bnl.gov">seth@bnl.gov</a></td>
</tr>

<tr>
<td><b>Last Modified</b></td>

<td>
<center>5/29/03</center>
</td>

<td>Seth Nemesure</td>

<td><a href="mailto:seth@bnl.gov">seth@bnl.gov</a></td>
</tr>
</table></center>

<h2>
<a NAME="TableOfContents"></a>Table of Contents</h2>

<ul>
<li>
<a href="#Introduction">Introduction</a></li>

<li>
<a href="#ReleaseInformation">Release Information</a></li>

<li>
<a href="#StartingTheProgram">Starting the Program</a></li>

<li>
<a href="#SECTION1">The Main Window</a></li>

<ul>
<li>
<a href="#GettingHelp">Getting Help</a></li>

<li>
<a href="#SelectingADeviceList">Selecting a Device List</a></li>

<li>
<a href="#UsingMultipleDevicePages">Using Multiple Device Pages</a></li>

<li>
<a href="#SettingAPpmUser">Setting a PPM User</a></li>
</ul>

<li>
<a href="#TheDevicePageWindow">The Device Page Window</a></li>

<ul>
<li>
<a href="#ViewingDevices">Viewing Devices</a></li>

<li>
<a href="#EditingDevices">Editing Devices</a></li>

<li>
<a href="#Nudging">Nudging (Increment/Decrement)</a></li>

<li>
<a href="#UsingTheBuffer">Using the Buffer</a></li>

<li>
<a href="#GraphicsOptions">Graphics Options</a></li>
</ul>

<li>
<a href="#WorkingWithClds">Working with CLDs</a></li>

<li>
<a href="#WorkingWithMetaDevices">Working with Meta Devices</a></li>

<li>
<a href="#WorkingWithParameters">Working with Parameters</a></li>

<li>
<a href="#WorkingWithKnobPanel">Using the Knob Panel</a></li>

<li>
<a href="#UserInterfaceReference">User Interface Reference</a></li>

<ul>
<li>
<a href="#MainWindowMenu">Main Window Menu Item Descriptions</a></li>

<li>
<a href="#DevicePageMenu">Device Page Menu Item Descriptions</a></li>
</ul>

<li>
<a href="#FAQ">Frequently Asked Questions</a></li>

<li>
<a href="#Glossary">Glossary of Terms</a></li>
</ul>

<hr>
<h2>
<a NAME="Introduction"></a>Introduction</h2>
control is a program for viewing and editing devices - that is, SLDs,
CLDs, MetaDevices, and Parameters. Groups of devices have been pre-packaged
into Device Lists, which can be selected from a tree of device lists called
the Machine Tree. Once a device list is selected, the devices within it
and their associated control points can be viewed and edited.
<p>control has a long history within the AGS Controls system, beginning
as a character-based program on VAX systems in the early 80's. It moved
to Apollo workstations in the late 80's and was improved many times through
the early 90's. In 1995, the program was converted to run under a more
generic UNIX environment using X Windows. In 1997, the program was converted
to run natively on SUN workstations. The current version can be displayed
on any X Windows based machine.
<p>For those familiar with the older Apollo version of control, there
is a list of major new or improved features in the <a href="#FAQ">Frequently
Asked Questions</a> area.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="ReleaseInformation"></a>Release Information</h2>
<p><b>June 8, 1999</b>
<p>Release of May 7 commissioning version.  Graphics options now available
in released version of control.

<p><b>May 7, 1999</b>
<p>New version in commissioning corrects a bug in communications libraries.

<p><b>April 27, 1999</b>
<p>New version in commissioning and in development release area.
In addition to graphics support ( see <A href="#GraphicsOptions">Graphics Options</a>
section of this document ), this version also includes some software library changes
that will be used in the future to support 'read only mode' and extensions to
communications protocols.

<p><b>February 25, 1999</b>
<p>Release of January 8 version.  This new release should not affect most users.
You still need to run the commissioning version to get graphics options.

<p><b>February 17, 1999</b>
<p>New commissioning version with graphics support.   Read the
 <A href="#GraphicsOptions">Graphics Options</a>
section of this document.

<p><b>January 8, 1999</b>
<p>New commissioning version with improvements in Tandem knob panel support.


<p><b>October 5, 1998</b>
<br>Released version.
<p>New features:
<blockquote>More accurate cld report representation in cld window
<dl>
<dl>The report for clds that have no corresponding cpx (database layout
configuration for the cld report) entry will no longer default to the database
value of the maximum report size. The values for the size of the report
is sent with the report. This size will now be used for determining the
number of setpoints and readbacks to display in the cld table. This will
lead to better performance and display of clds.</dl>
</dl>
-device_list switch
<dl>
<dl>A user can now start control to display a single device list only
using the <b>-device_list</b> switch. The syntax is - <b><nobr>control
-device_list device_list_path_name</nobr></b>
<p>For example, starting control as <b><nobr>control -device_list
Booster/Extraction/Bta</nobr></b> will cause a device list window to be
displayed with the devices found in the machine tree path /operations/acop/Booster/Extraction/Bta.
<p>The user will be able to interact with the devices on the device list,
but will have no access to the machine tree that control typically
provides. The loading of archives is still available. Exiting the device
list will cause the application to be terminated.</dl>
</dl>
Knob panel support - Tandem only
<dl>
<dl>A user can now start control to make use of a knob panel. This
will make use of an sio line from the SUN to a knob panel that is used
by Tandem. The switch is <b>-knob</b> and should only be used on a machine
that has a knob panel present. A section explaining how the knob panel
will interact with control has been added to this document (see <nobr><a href="#WorkingWithKnobPanel">Using
the Knob Panel</a>).</nobr></dl>
</dl>
Cld window creation errors
<dl>
<dl>The user will now be presented with a more specific reason as to why
a cld window cannot be created. Possibilities could be no report from station,
a bad report from the station, etc.</dl>
</dl>
Parameter errors when modifying setpoints
<dl>
<dl>The user will now have a message displayed that the value was possibly
out of range and the old setpoint value restored if a value is sent down
that causes a problem with the parametric device. Note that this can only
be accomplished if the Control sld (.CTL) of the parametric device is on,
causing the function to be sent down immediately on a modification of one
of the parameters.</dl>
</dl>
Printing a device list
<dl>
<dl>Printing of a page (visible or all) will now display the path to the
page at the top of the printout. This is the same path visible in the title
bar of the page.</dl>
</dl>
Printing a cld window
<dl>
<dl>The user can now print out the visible portion or the entire table
of a cld window. The user can select from the device list portion (top
table) or the cld table (bottom table). If the cld table is printed, the
cld name and path (if available) will be displayed on the printout.</dl>
</dl>
Editing parameters
<dl>
<dl>A problem editing parameters was encountered that allowed the current
parameter value read from the database to overwrite the cell being edited.
The edited cell will now block the value from being placed into the edited
cell.</dl>
</dl>
</blockquote>
Bug fixes:
<blockquote>Focus problems - first cell highlighted
<dl>
<dl>A problem gaining focus on cells was corrected. Device lists that were
reloaded were loaded properly, but the first time load of a device list
could encounter problems.
<p>Setting the current cell when a page was loaded (or reloaded) was also
impacted by a bug introduced when the cld buffer was added to the page.
Cld setpoints that had '***' displayed could gain focus, which caused the
cell to be highlighted. The correct cell will now be highlighted.</dl>
</dl>
Editing any setpoint cell
<dl>
<dl>The value restored for an edited setpoint cell that was not accepted
was the value in the cell prior to the editing. A change has been implemented
to allow the value received in the last report to be restored, which is
a more accurate representation of the current value of the setpoint cell.</dl>
</dl>
</blockquote>
Other info:
<blockquote>
<dl>
<dl>The application now makes use of the cns (Controls Name Server) when
loading device lists and cld windows. If the cns is not running, the application
will continually attempt to reconnect to the cns when loading device lists
and cld windows. If the application appears to be slower than usual when
loading device lists, the state of the cns should be confirmed via StartUp.
If the cns is not running, it should be restarted.</dl>
</dl>
</blockquote>
<b>July 9, 1998</b>
<blockquote>Release. The following bug fixes were made:
<p>A user can now load an all user ppm window successfully from a cld window.
The application will no longer crash.
<p>A user can no longer attempt to create an all user ppm window from an
existing all user ppm window. This used to crash the application.
<p>The cld window will now automatically send down the setpoints for auto-send
cld windows. A bug was found that allowed factor modifications to be sent
down automatically, but not setpoint modifications. This will now work
correctly.</blockquote>
<b>March 13, 1998</b>
<blockquote>Release. This version provides the following enhancements:
<p>Cld support for buffers has now been implemented. Clds appearing on
device pages will be stored in the buffer in a manner similar to slds.
The buffer contents will be filled in for clds as well as slds. The string
'***' is used to indicate that setpoints are held in the buffer for clds.
In order to view the setpoints of the cld buffer, simply press the 3rd
mouse button (right button). Pressing the 2nd mouse button (middle button)
will send the cld buffer.
<p>Results of loading the buffer and sending the buffer are now maintained
and may be viewed. A simple first pass before sending the buffer to ensure
devices have data will be made. Any device with missing data will cause
a warning to be displayed, prior to the send (if doing a global send buffer).
<p>The following logic inconsistencies were corrected:
<p>Many inconsistencies on loading the buffer were corrected. Buffers are
now filled in properly and locked when switching PPM users.
<p>The following bug fixes were made:
<p>When loading an archive into a device list, if an sld appeared multiple
times, only the first occurrence would have a value filled in from the
archive. All occurrences of the device will now have the archive filled
value in.
<p>When loading the buffer initially during the load of a page, a race
condition could occur that would cause the table buffer values to be compared
incorrectly (the values would be equivalent, but colored yellow). The buffer
will now be equivalent (with no yellow color displayed).
<p>When loading the buffer from an archive, a loadArchiveWindow is displayed.
If the window was displayed when the page window (device list window) was
closed, the application would crash. This problem has now been corrected.</blockquote>
<b>November 25, 1997</b>
<blockquote>Commissioning version. This version corrects the following
bugs:
<p>After a send buffer, a message would appear indicating the buffer was
successfully sent. Improper memory addressing could result due to the message
being sent to be displayed, causing the application to crash.
<p>The cld command could not be sent, only setpoints could be changed.
This was an oversight of the AgsPage (device list stand-alone and top of
a CldWindow). The command can now be sent if and only if a report was received
that contains setpoints for the cld. Please note: the cld buffer is ignored
at the present time. The buffer specifications for a cld are being investigated.
<p>An error on loading a device list in a new window would cause a blank
space to be placed in the window list (bottom of main control window).
Selecting the blank space would cause a device list window to be displayed
with no devices. On an error creating the new window (e.g. no devices in
list), the window will no longer be created, and the blank space will not
appear in the list.
<p>A crash was caused during the sending of an sld command. This was caused
by improper message handling by the AgsPage table. The table will now handle
its own UIMessage event properly.
<p>An enhancement was made that will now allow the CldWindow to display
messages from the AgsPage portion of the window. This will be useful when
sending commands.</blockquote>
<b>October 20, 1997</b>
<blockquote>New version released. This version corrects the following bugs:
<p>Selection of a command for a device would cause the application to crash
occasionally, after a device page was reloaded. This was a problem in the
table and has been corrected.
<p>The table used to select device lists would scroll and display a blank
screen on rare instances. This was due to a problem with the table resizing.
This was noticed mostly at Tandem and has been fixed.
<p>The parameters would not fill in with data that should have been obtained
from the database. The phenomenon occurred on the first attempt to get
data only. This only occurred if the database had not yet been accessed
by other methods in the application (e.g. parameters would fill in immediately
if a device description were first requested). A problem in the database
communication tools was corrected to address this.</blockquote>
<b>September 26, 1997</b>
<blockquote>New version released. This version corrects the loading of
cld archives, caused by improper archive formats that were saved. A problem
loading archives from the default database (caused by improper default
connection) was corrected. Archive headers are now obtained from the Sybase
database, and no longer from the Archive database server (this was an oversight
that was caught and corrected quickly).
<p>An enhancement was also made that now centers any cld window popups
over the cld window, rather than placing the popup over the control
main window.
<p>A more informative message is provided to the user on a cld load archive
failure. The failure may be due to improper reading of the file (e.g. the
file doesn't exist), or the file may be read properly and the cld device
archive information is not contained within the archive.</blockquote>
<b>September 17, 1997</b>
<blockquote>New version released. This version provides new archive support
for CLDs. The archive headers are obtained from a SYBASE database. Archives
that are selected from the database are now stored by run. The user can
select the desired run (HIP/HEP YR) from which the archives are desired.
CLD nudge values are now stored in the database as well.</blockquote>
<b>March 31, 1997</b>
<blockquote>New version in program commissioning. This version provides
table-type support for CLDs. A new generic interface allows virtually all
CLDs that have setpoints and measurements to be viewed. Tuned interface
windows for certain CLDs (BTA and FEB CLDs that were handled by mini-apps,
as well as timeline CLD support) have also been provided. Attempts are
made to get continuous reports from requested CLDs although hardware does
not allow this in some cases.
<p>This version also corrects a bug on device lists that had parameters.
The continual updates would stop after 1 minute.</blockquote>
<b>December 2, 1996</b>
<blockquote>Allows longer lists of archives to be displayed. For some device
lists, this version is needed to provide access to old STORE archives.</blockquote>
<b>October 30, 1996</b>
<blockquote>Event names in datacon device descriptions will now be correct.</blockquote>
<b>July 31, 1996</b>
<blockquote>Continuous CLD reports are not requested by control.</blockquote>
<b>March 5, 1996</b>
<blockquote>Soft faults for devices on INTEL stations are now supported
using information in the ddf.</blockquote>
<a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="StartingTheProgram"></a>Starting the Program</h2>
control can be started from the StartUp program. Its entry exists under
the General Programs section.
<p>From the command line, the released version of control can be started
by typing:
<pre>&nbsp;&nbsp;&nbsp; /agsdcs/bin/control</pre>
Possible command line arguments are:
<center><table BORDER CELLPADDING=4 >
<tr>
<th>Argument&nbsp;</th>

<th>Type&nbsp;</th>

<th>Default&nbsp;</th>

<th>Description&nbsp;</th>
</tr>

<tr>
<td>-host&nbsp;</td>

<td>string&nbsp;</td>

<td ALIGN=CENTER>none&nbsp;</td>

<td>preferred relway host&nbsp;</td>
</tr>

<tr>
<td>-db_server</td>

<td>string&nbsp;</td>

<td ALIGN=CENTER>none&nbsp;</td>

<td>preferred database server&nbsp;</td>
</tr>

<tr>
<td>-root&nbsp;</td>

<td>string&nbsp;</td>

<td ALIGN=CENTER>none&nbsp;</td>

<td>location of machine tree&nbsp;</td>
</tr>

<tr>
<td>-ddf&nbsp;</td>

<td>string&nbsp;</td>

<td ALIGN=CENTER>none&nbsp;</td>

<td>preferred ddf to load&nbsp;</td>
</tr>

<tr>
<td>-help&nbsp;</td>

<td>switch&nbsp;</td>

<td></td>

<td>prints out lists of arguments&nbsp;</td>
</tr>
</table></center>
<a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="SECTION1"></a>The Main Window</h2>
The new control has a main window which is used to set or retrieve
information that is global to the program. It is also used to spawn child
(device page) windows which contain devices from a selected device list.
There is only one main window, but there can be many device pages.
<p><img SRC="MainWindow.gif"  align=RIGHT> The main window has four areas.
From top to bottom these are:
<ul>
<li>
A menubar and pulldown menu system for making menu selections.</li>

<li>
A machine tree selector for traversing the AGS machine tree and making
device list selections.</li>

<li>
A list of open device or CLD pages and their associated PPM user number.</li>

<li>
A message area.</li>
</ul>
For information on the pulldown menu items, see the section titled <a href="#MainWindowMenu">Main
Window Menu Item Descriptions</a>.
<p>For information on using the machine tree selector, see the section
titled <a href="#SelectingADeviceList">Selecting a Device List</a> below.
<p>For information on using the device pages list, see the section titled
<a href="#UsingMultipleDevicePages">Using
Multiple Device Pages</a> below.
<h4>
<a NAME="GettingHelp"></a>Getting Help</h4>
A Help menu on the right side of the menubar in the main window is used
to read various help sources pertaining to control. From this menu
you can read program overview and release information (this document),
operations notes and version information.
<p>Context-sensitive help is available on most menu items and on many user-interface
items using the right mouse button. Press and hold this button over the
item of interest to view the help text. Release the button when done.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="SelectingADeviceList"></a>Selecting a Device List</h4>
The machine tree selector on the main window is used to make device list
selections. This selector allows you to view and traverse the machine tree.
Initially, the top level of the machine tree (Ags, Booster, etc.) is displayed.
Clicking on one of the items causes that section to expand one level.
<p>The column of arrows on the left indicates the expansion states of the
associated sections of the tree. If an item has a left-facing arrow, it
means that this section has a sublevel that is not currently being viewed.
If there is a down-facing arrow, the sublevel is being displayed. If no
arrow exists, then there is no sublevel for that item. That is, this node
is a leaf node. Clicking on an arrow causes that section to expand or contract
depending on whether the arrow is pointing left or down.
<p>Leaf nodes are the ones that contain displayable lists of devices. The
purpose of the machine tree selector is to allow you the capability to
move through the machine tree to a leaf node of interest. Selecting the
leaf node will then cause the device list to be displayed in a Device Page
- a separate window which displays the devices and allows you to edit them.
The leaf name for the device list and the PPM user number will then appear
in the Device Pages list below the machine tree selector.
<p>Selecting a leaf node from the machine tree selector with the left mouse
button causes the last used device page to have its devices replaced with
the devices in the newly selected list. If there are no device pages, then
a new one will be created. Clicking on the leaf node with the middle mouse
button will also cause a new device page to be created.
<p>Selection from the machine tree can also be made from the keyboard.
The machine tree has been modified specifically for this purpose. Each
set of possible selections from a particular section of the machine tree
has been modified so that each possible choice has a unique first uppercase
character. Selecting this letter on the keyboard will select that entry.
<p>For example, at the top level of the machine tree we see Ags, Booster,
Controllers, Linac, Other, SEB, and Tandem. The first uppercase character
in each of these items (A B C L O S T) is unique. Pressing one of these
characters will select the associated item in the selector. Pressing L,
for example, is like clicking on Linac. The Linac section then expands
showing its set of possibilities (Instrumentation, Location, etc.). Each
one of these entries has a unique first uppercase character. You can press
one of these characters and continue your way through the tree. So, for
example, pressing LIT from the top level of the machine tree is like selecting
Linac -> Instrumentation -> beam_Transformers.
<p>Note that you must hit the RETURN key to replace the current device
page. Hitting the F1 key, instead, causes a new device page to be created.
<p>Some other items of note about selecting device lists:
<ul>
<li>
You can go from one part of the machine tree to any other visible part
of the tree by clicking on the section you are interested in.</li>

<li>
In a few, seldom-used cases, there is no uppercase character to select.
In these cases, you can use the up or down arrows on the keyboard to get
to the item of interest.</li>

<li>
Choosing the Find menu option from the Page menu causes the machine tree
to revert back to its initial state with just the top-level items showing.
A keyboard accelerator (Ctrl + F), can also be used for this purpose.</li>
</ul>
<a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="UsingMultipleDevicePages"></a>Using Multiple Device Pages</h4>
Many device pages can be displayed and active simultaneously. Their leaf
names and PPM user numbers will all be listed in the Device Pages list
on the main window. One of the pages in this list always shows up selected.
It is the current device page.
<p>You can make a device page the current one by either clicking on the
window with the mouse or by clicking on its entry in the device pages list.
The path through the machine tree for the current device page is always
displayed in the machine tree selector.
<p>Selecting Close from the Page menu on the main window will close the
selected device page. Selecting Close All... will cause all device pages
to be closed after a confirmation. Closing a device page using either of
the Close menu items on the device page will also cause it to be deleted
from the Device Pages list.
<p>Choosing Hide from the Page menu takes the device page off the screen,
but keeps its image in memory. It can be shown again by clicking on the
name in the device page list.
<p>The device pages are initially displayed next to the main window either
on the top or bottom of the screen depending on the location of the current
device page. Once on the screen, they behave like any other window and
can be moved or resized as desired.
<p>A device page window cannot be iconified independently. It can, however,
be taken off the screen by choosing Hide from the Page menu. The main window
and all device page windows are iconified together into a single icon labeled
control using the icon button on the main window.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="SettingAPpmUser"></a>Setting a PPM User</h4>
The main window is used to set the default PPM user for the program. This
default determines the PPM user for newly created device pages, but it
does not affect existing device pages. To set the default PPM user, choose
Default PPM User from the Setup menu on the main window. The default PPM
user is displayed on the main window just below the menubar.
<p>Each device page can have a different PPM user. To change the PPM user
for a particular device page, choose Set PPM User from the Page menu. This
will cause the page to reload, displaying information for the selected
PPM user. The PPM user for a device page is displayed in the window's title
area.
<p>The devices on a device page are color-coded to reflect their PPM user.
A device which appears in black is a non-PPM device. PPM devices appear
using the following colors:
<blockquote>PPM User 1 - green
<br>PPM User 2 - magenta
<br>PPM User 3 - brown
<br>PPM User 4 - blue
<br>PPM User 5 - orange
<br>PPM User 6 - cyan
<br>PPM User 7 - purple
<br>PPM User 8 - gray</blockquote>

<blockquote>Non-PPM Users - black</blockquote>
<a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="TheDevicePageWindow"></a>The Device Page Window</h2>
Each device page allows the user to view and/or edit the devices from a
single device list. The window contains a menubuar and pulldown menu system
at the top, a table containing information for the devices in the device
list, and a message area at the bottom.
<center><img SRC="DeviceWindowBSLC.gif" ></center>
For information on the pulldown menu items, see the section titled <a href="#DevicePageMenu">Device
Page Menu Item Descriptions</a>.
<p>Information on using the device table is contained in many sections
below.
<h4>
<a NAME="ViewingDevices"></a>Viewing Devices</h4>
When a device page is created, continuous reports are requested from the
stations connected to the devices. If everything is operating correctly,
these reports are received and displayed at least every AGS cycle (about
3 secs). For PPM devices with more than one active user, more than one
report will be received each AGS cycle.
<p>The device information received is displayed in the device table area
on the device page window. The device table displays the following information
when the page is in <b>Operational Mode</b>:
<blockquote>
<dl>
<dt>
<b>Device Name</b> - the name of the SLD, CLD, MetaDevice or Parameter.</dt>

<p><br>Non-PPM device names appear in black. PPM device names appear in
a color determined by the device pages PPM user number (see <a href="#SettingAPpmUser">Setting
a PPM User</a> above).
<p>Clicking on the device name with the right mouse button brings up a
popup which displays information about the device. The description is editable
(see <a href="#EditingDevices">Editing Devices</a> below). You can leave
this popup up and click on a different device name to view the description
for another device on this page.
<p>For cld devices, clicking on the device name with the middle mouse button
will cause a cld editing window to be displayed. (An attempt will be made
at creating a cld window. A report must be received for the attempt to
be successful.) See <a href="#WorkingWithClds">Working with CLDs</a> for
more information.
<dt>
<b>Indicator</b> - the status of a device report.</dt>

<dl>
<dt>
It has the following values:</dt>

<table CELLPADDING=3 >
<tr>
<td VALIGN=TOP>#&nbsp;</td>

<td>Good report was received. It is the first report received with its
AGS cycle number. The color cycles depending on whether the cycle number
is odd or even. The first report received is colored black.&nbsp;</td>
</tr>

<tr>
<td VALIGN=TOP>+&nbsp;</td>

<td>Good report was received. It is not the first report received with
its cycle number. This will occur for non-PPM devices when more than one
PPM user is active.&nbsp;</td>
</tr>

<tr>
<td VALIGN=TOP>C&nbsp;</td>

<td>Report came in, but the controller data is missing. Usually this means
that the station is working, but the device controller is not.&nbsp;</td>
</tr>

<tr>
<td VALIGN=TOP>B&nbsp;</td>

<td>Report came in, but it is in an unknown format.&nbsp;</td>
</tr>

<tr>
<td VALIGN=TOP>Blank&nbsp;</td>

<td>No reports have come in for this device.&nbsp;</td>
</tr>
</table>
</dl>

<dt>
<b>Measmnt</b> - the device measurement.</dt>

<p><br>If the device has a true measurement, the cell is filled in with
the measurement value obtained from the station. If there is no measurement,
but there is a setpoint, the cell is filled in with the setpoint readback
from the controller. If there is neither a measurement or a setpoint, the
cell appears blank.
<p>If the device has a measurement, the value received is checked against
the tolerance limits for the device. If the measurement value is outside
of these limits, there is a range error. If the measurement is being watched
for errors by the station, this value will appear in red on control.
If it is not being watched, it will appear gold. As a special case, if
no tolerance values have been set up for the device, and the device is
not being watched, the measurement appears in its normal black color. The
tolerance limits are determined as follows from the device tolerance information
stored in the database and from the current setpoint value:
<blockquote>max = setpoint + setpoint * tolerance + tolerance_offset
<br>min = setpoint - setpoint * tolerance - tolerance_offset</blockquote>
For cld devices, if a report is received that has a measurement for the
cld, the string '***' will be displayed. The user may view the measurements
by clicking on the device name with the middle mouse button, or by clicking
on the '***' with the middle mouse button.
<dt>
<b>Units</b> - the units for the device stored in the database.</dt>

<dt>
<b>Setpt</b> - the device setpoint.</dt>

<p><br>If the device has a setpoint, the cell is filled in with the setpoint
value obtained from the station. If the device does not have a setpoint,
the cell appears blank.
<p>See the section <a href="#EditingDevices">Editing Devices</a> below
for information on changing setpoints.
<p>For cld devices, if a report is received that has a setpoint for the
cld, the string '***' will be displayed. The user may view and edit the
setpoints clicking on the device name with the middle mouse button, or
by clicking on the '***' with the middle mouse button. A cld editing window
will be presented. For information on the cld editing window, refer to
<a href="http:/Controls/doc/cld/cld.html">The
CLD Interface</a>.
<dt>
<b>Nudge</b> - the value used to increment or decrement the setpoint.</dt>

<p><br>If the device has a setpoint, the initial value for the nudge comes
from the value in storage. If there is no value stored, 10 times the least
count value for the device is used. The least count for a device is the
minimum change in a device setpoint allowed by the device hardware.
<p>See the section <a href="#EditingDevices">Editing Devices</a> below
for information on editing and saving nudge values.
<dt>
<b>C1 thru C4</b> - commands 1 thru 4 for the device.</dt>

<p><br>If a command exists, its current value from the station appears
in black in a cell that looks like a pushbutton. If no command exists,
the cell appear blank with the exception noted below.
<p>In some cases, a command can have an associated status. For example,
a power supply might have a command with two possible states, ON or OFF.
If this command has an associated status, the command and status values
should agree. If they don't, a status error condition exists. Another way
a status can be in error is if the status is a "normal" status, but it
is not in a normal state. That is, it should show NOR, but it is not. When
a status is in error for a device, and there are blank command cells, those
cells are used to display those statuses. This is done to alert the user
that an error condition exists without forcing the user to scroll the table
to see the statuses. These error statuses appear in red or gold in empty
command cells on a non-raised background.
<p>See the section <a href="#EditingDevices">Editing Devices</a> below
for information on editing commands.
<dt>
<b>Buffer</b> - a storage area for device setpoints.</dt>

<p><br>If the device has a setpoint, this cell is filled in with the value
obtained from the initial report from the device. If the buffer cell has
a normal background color, the buffer and setpoint values agree. If the
background color is different (by default, gold), then the values disagree.
<p>For cld devices, if a report is received that has a setpoint for the
cld, the values will be held in the buffer and the string '***' will be
displayed. The user may send the cld buffer by clicking on the '***' using
the middle mouse button. The user may view the setpoints and buffer by
clicking on the '***' using the third mouse button (right button). Clicking
the third mouse button on a second cld with the setpoint/buffer display
already visible will cause the display to be reloaded with the newly selected
cld's setpoint/buffer values.
<p>See the section <a href="#UsingTheBuffer">Using the Buffer</a> for further
information on the buffer.
<dt>
<b>BC1 thru BC3</b> - a storage area for device commands.</dt>

<p><br>If the device has commands, one or more of these cells are filled
in with the values obtained from the initial report from the device. If
the buffer cell has a normal background color, the buffer and command values
agree. If the background color is different (by default, gold), then the
values disagree.
<p>See the section <a href="#UsingTheBuffer">Using the Buffer</a> for further
information on the buffer.
<dt>
<b>S1 thru S16</b> - statuses 1 thru 16 for the device.</dt>

<p><br>If a status exists, its current value from the station appears in
one of the status columns. If the status indicates an error condition and
it is being watched by the station, it appears in red. If the status is
in error and it is not being watched, it appears in gold. Otherwise it
appears in black.
<p>An error condition can exist for a status in one of two ways. In some
cases, a command can have an associated status. For example, a power supply
might have a command with two possible states, ON or OFF. If this command
has an associated status, the command and status values should agree. If
they don't, a status error condition exists. Another way a status can be
in error is if the status is a "normal" status, but it is not in a normal
state. That is, it should show NOR, but it is not.</dl>
</blockquote>
In <b>Engineering Mode</b>, the following additional columns appear: (Columns
marked with an * can be displayed in engineering or device units.)
<blockquote>
<dl>
<dt>
<b>Setpt</b>(*) - the device setpoint</dt>

<p><br>The setpoint for the device, if there is one. This value always
comes from the station.
<dt>
<b>Expected</b>(*) - measurement expected for setpoint</dt>

<p><br>Based on the preceding Setpt column, this value shows the measurement
value that would be expected for the displayed setpoint.
<dt>
<b>Units</b> (*) - engineering or device units</dt>

<p><br>When the radio button in the Diagnostics menu indicates Device Units,
this column displays CNTS for each device with a setpoint or measurement.
This indicates device units, which in almost all cases is counts. When
Engineering units is selected, this column shows the engineering units
for the devices.
<dt>
<b>Tol Low</b> (*) - low tolerance limits for measurements</dt>

<p><br>For devices with measurements, this value, which is based on the
device tolerance percent and tolerance offset, determines the lower limit
for measurements. Below this limit, measurements are considered out of
tolerance and appear in red.
<dt>
<b>Tol High</b> (*) - high tolerance limits for measurements</dt>

<p><br>For devices with measurements, this value, which is based on the
device tolerance percent and tolerance offset, determines the upper limit
for measurements. Above this limit, measurements are considered out of
tolerance and appear in red.
<dt>
<b>Sp Rdbk</b> (*) - the setpoint readback</dt>

<p><br>For devices with setpoints, this is the setpoint value as read back
from the device controller.
<dt>
<b>Measmnt</b> (*) - the measurement value</dt>

<p><br>The same as the measurement in column 3 except that this value can
be toggled from device to enginering units.
<dt>
<b>CR1 thru CR8</b> - command readbacks 1 thru 8</dt>

<p><br>These are the command values that have been read back from the device
controller.
<dt>
<b>Stn Db</b> - station database number</dt>

<p><br>This is the number that has been attached to the station database
as received in the latest device report.
<dt>
<b>Cycle</b> - AGS cycle number</dt>

<p><br>The AGS cycle number for the latest report received.
<dt>
<b>Reps</b> - reports for cycle</dt>

<p><br>The number of reports received for the current AGS cycle.
<dt>
<b>Time</b> - scan time</dt>

<p><br>The time in the AGS cycle that the controller was scanned by the
station.</dl>
</blockquote>
<a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="EditingDevices"></a>Editing Devices</h4>
This section discusses methods for directly editing SLD setpoints, SLD
&amp; CLD commands, and device descriptions. Setpoints and commands can
also be edited using device nudging and buffer manipulation. For information
on these methods, see the sections titled <a href="#Nudging">Nudging</a>
and <a href="#UsingTheBuffer">Using the Buffer</a> below.
<p>Setpoints are edited using a three step process:
<blockquote>
<dl>
<dt>
<b>1. Highlight the setpoint cell.</b></dt>

<dd>
This is done either by clicking on it using the 1st mouse button or by
using the keyboard arrow keys to make it the highlighted cell.</dd>

<dt>
<b>2. Edit the value.</b></dt>

<dd>
Once the cell is highlighted, begin typing the new value. There is no need
to erase the previous value. You can enter the new value using either the
standard keyboard or the numeric keypad. Once you begin entering a value,
the cell color will change. This indicates that a new value exists in this
cell, but it has not yet been sent.</dd>

<dt>
<b>3. Send the value.</b></dt>

<dd>
This can be done either by pressing the RETURN or ENTER key on the keyboard
or by clicking the middle mouse button on the cell. A message will then
appear in the message area confirming that the new value was sent.</dd>
</dl>
</blockquote>
Commands can be edited using either the mouse or the keyboard. To edit
commands using the mouse, click on the command cell with the 1st mouse
button. A menu of possible commands will then appear under the command
cell. Click on the command that you wish to send. This causes the selected
command to be displayed AND the command to be sent to hardware. If you
decide not to select a new command, move the cursor out of the command
menu and release the button. To re-send a command, click on it with the
middle mouse button.
<p>To edit the description for a device, click on the device name with
the right mouse button. This will cause the device information popup to
appear. Alternate ways to make this popup appear are to highlight the device,
then choose Description from the Device menu or type Ctrl + D from the
keyboard. Once the popup appears, edit the device description, then click
on the Save button to store the new description. If you click the Revert
button, the description is re-read from the device database. This description
field word wraps, so there is no need to hit the RETURN key. You are limited
to 256 characters. If you attempt to enter more than that, the system will
beep each time you hit a key.
<center><img SRC="DeviceDesc.gif" ></center>

<h4>
<a NAME="Nudging"></a>Nudging (Increment/Decrement)</h4>
Nudging is a method whereby the user slowly increases or decreases the
setpoint by a fixed amount (the nudge value) using the mouse or the keyboard.
This method has also been referred to as knobbing or increment/decrement.
<p>Each device page contains a special column labeled Nudge. The nudge
cell for each device holds the amount that the setpoint will be moved up
or down when the user increments or decrements it. When the device page
first appears, the initial values for the nudge cells are taken from those
in storage for the devices on that page. If a value is not stored, ten
times the least count value is used instead. The least count for a device
is the minimum change in a device setpoint allowed by the device hardware.
<p>There are a few ways to nudge a setpoint. The most common is to click
the 1st mouse button on the nudge cell to decrement the setpoint value,
and the 3rd mouse button to increment the value. A second way is to highlight
the setpoint cell that you wish to nudge, then press the F1 key to decrement
and the F2 key to increment its value. A third way is to choose Decrement
or Increment from the Setpoint menu.
<p>To edit a nudge value, click on the nudge value with the middle mouse
button or select Edit... from the Nudge menu. A popup will appear allowing
you to edit the value. To make ALL the nudge values on this device page
the same value, choose Edit All... from the Nudge menu and enter a new
value into the popup that appears.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="UsingTheBuffer"></a>Using the Buffer</h4>
The buffer is initially loaded from the first device reports that are received
for the devices on the device page. After that, the contents of the buffer
is under user control. Reports are no longer placed in the buffer if any
of the following occur: a) any menu option loading the buffer is used,
e.g. load from current, load from temp, or load from archive, or b) the
pages ppm user is modified. Once these menu options are selected, the buffer
is considered locked, and will no longer be loaded automatically with the
first report. The user may reload the buffer from the last received report
by doing an explicit load from current.
<p>There are a number of ways to edit the buffer contents. First, the buffer
columns can be directly edited. That is, you can edit the setpoint (slds
only) and command cells in the buffer in the same way that you would edit
the real setpoint and command cells on the device page. Note, however,
that edited buffer values are not sent to hardware until you explicitly
send it.
<p>To send the buffer to hardware (setpoint and commands) for an individual
device, click on the buffer setpoint cell with the middle mouse button
or choose Send Device from the Buffer menu. To send the buffer to hardware
for all devices on the device page, choose Send... from the Buffer menu
or type Ctrl + S. You will see a confirmation popup before the buffer contents
are sent.
<p>To get a fresh buffer, choose Load from Current from the Buffer menu.
This copies the contents of the real setpoint and command columns to the
appropriate buffer columns, making them equivalent. The background color
for all buffer cells should clear to the standard background color for
the device page.
<p>To load the buffer from an archive file, choose Load from Archive from
the buffer menu. A popup will then appear showing a list of all archives
that exist for the current device page. Select the desired archive from
the list, then choose the Apply or OK button. The Apply button loads the
buffer, but leaves the list up, allowing you to make other selections.
The OK button loads the buffer and closes the popup. The Close button closes
the popup without loading the buffer. A double-click on the archive name
is the same as selecting it, then clicking the Apply button.
<center><img SRC="ArchiveWindow.gif" ></center>

<p>The device page allows you to store a special archive file called Temp.
There is only one Temp file in the entire system for each device list.
A Temp file is typically stored when you have some settings that you wish
to store temporarily. You should not depend on this file being there because
it will be overwritten by the next user that saves Temp for this device
page.
<p>Choosing Save Temp. File from the Buffer menu, or typing Ctrl + T, causes
the Temp file to be written from the setpoints and commands shown on the
device page.
<p>To load the buffer from the current Temp file, choose Load from Temp
from the buffer menu. To make these settings the current hardware settings,
you must then send the buffer by choosing Send... from the Buffer menu.
<p>After loading or sending the buffer, a user will receive a message in
the message area about the status of the load or send. The user may view
the results of the load or send by selecting the menu options 'View Load
Buffer Results...' and 'View Send Buffer Results...' from the Buffer menu.
If any devices fail to be loaded, or encounter a problem during the send
of the buffer, the user can view this information by using these menu options.
<p>Before the send of the buffer, a warning will be presented to the user
that contains all devices that have no setpoint and/or commands to send
to the device (where a setpoint or command is expected). The user will
then have the option of continuing with the send of the buffer, or cancelling
the operation.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<br>&nbsp;
<h4>
<a NAME="GraphicsOptions"></a>Graphics Options</h4>
Graphics options are newly available in control ( in commissioning
version of 2/17/99 ).&nbsp;&nbsp; The Graphics menu on each device page
includes the options listed below.&nbsp;&nbsp; The graphs are produced
using the Monitor tools that are used in the new release of Gpm4.0.&nbsp;&nbsp;
Read the <a href="http:/Controls/doc/Gpm/Gpm.html">Gpm
documentation</a> for a fuller description of the Monitors.&nbsp;&nbsp;
To use these options, first select a device on the control page.&nbsp;
Then click on the menu option to create or add this device to the desired
type of graph.
<ul>
<li>
<b>New StripChart</b></li>

<li>
<b>Add to StripChart</b></li>
</ul>

<ul>
<li>
<b>New Snapshot Graph</b></li>

<li>
<b>Add to Snapshot Graph</b></li>
</ul>

<ul>
<li>
<b>New Correlation Graph</b></li>

<li>
<b>Add to Correlation Graph</b></li>
</ul>

<h4>
Strip Charts</h4>
The Y axis in a strip chart represents the SLD measurement or setpoint
value.&nbsp;&nbsp; If a selected device has both a measurement and a setpoint,
both will be included on the strip chart.&nbsp;&nbsp; The X axis is AGS
cycle number by default but may be changed to time of day.&nbsp;&nbsp;
The Edit Monitor option in the graph Setup menu lets you adjust this and
other options.&nbsp;&nbsp; If you add a CLD&nbsp;to a strip chart, the
average of all the values in the CLD&nbsp;array will be plotted.
<h4>
Snapshot Graphs</h4>
Snapshot graphs are especially good for CLD&nbsp;array data.&nbsp;&nbsp;
The Y axis of the graph represents the value of each array element.&nbsp;
The X axis by default represents array index.&nbsp;&nbsp; The full display
updates when new data arrives.&nbsp;&nbsp; SLD&nbsp;values may also be
added to a Snapshot graph.&nbsp;&nbsp; The values from a number of SLDs
are connected to make one data set on the graph.&nbsp;&nbsp; If a selected
device has both a measurement and a setpoint, only its measurement is added
to the Snapshot graph.
<h4>
Correlation Graphs</h4>
Correlation graphs can plot mutiple parameters along the Y axis versus
one parameter along the X&nbsp;axis.&nbsp;&nbsp; If a device has both a
measurement and a setpoint, its measurement is plotted on the Y axis versus
the setpoint on the X&nbsp;axis.&nbsp;&nbsp; If the first device you select
has only a setpoint or only a measurement, that quantity will become the
X axis variable for the correlation graph.&nbsp; You will need to make
an additional selection for the Y axis.&nbsp; The Edit Monitor option in
the graph Setup menu lets you adjust the X axis cell designation as well
as other options.
<br>&nbsp;
<h2>
<a NAME="WorkingWithClds"></a>Working with CLDs</h2>
CLDs are the Accelerator Controls Group's complex logical devices (referred
to hereafter as CLD). The CLDs of the complex are used to control many
of the accelerator devices.
<p>From a control page, you can set CLD settings and commands by choosing
CLDs... from the Options menu on the main window.
<center><img SRC="CLDWindow.gif"  align=CENTER></center>

<p>A second method for viewing/editing CLD information is by clicking on
the name of a CLD on a Device Page using the middle mouse button. CLDs
that are good candidates for viewing measurements and viewing/editing setpoints
typically have asterisks in the measurement or setpoint columns, indicating
that measurements or setpoints exist for the CLD (clicking on the asterisks
using the middle mouse button will also make a new CLDWindow). A new CLDWindow
will present the measurements and/or setpoints to the user for a CLD. Commands
for the CLD may be edited in a device list that accompanies the CLD setpoints,
and statuses may be viewed as well.
<p>To edit CLD events on the AGS or Booster time lines, choose Set CLD
Events... (note that selecting these by controller will bring up the same
editing tool) from the Options menu on the main window. The advantage to
using Set CLD Events... is that only time-line controllers will be presented
in the list. Select a time line to work with, and then select a device
on that time line. A CLDWindow will appear for the user to enter times
and/or modify commands.
<p>For additional information about CLDs, please refer to <a href="http:/Controls/doc/cld/cld.html">The
CLD Interface</a>.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="WorkingWithMetaDevices"></a>Working with Meta Devices</h2>
Meta devices are special devices which can control many other devices (SLDs,
CLDs, or Parameters). How these devices are linked is stored in the database.
Each metadevice has a name and an associated function, which it applies
to each of its meta member devices.
<p>From control you can send a nudge value to the meta device function,
causing each of the meta member devices to be changed. A meta device on
a device page is indicated by the string "Meta" in the Units column for
the device. It is common for a device list to be set up so that the member
devices appear below the associated meta device.
<p>To increment or decrement a meta device, enter the desired nudge value
in the nudge cell for the meta device by clicking on the nudge cell with
the middle mouse button and entering the value. Then, use the first mouse
button to decrement and the 3rd mouse button to increment the value. After
a short delay, you should see the values for the associated member devices
update.
<p>The Setpoint cell for the metadevice accumulates the increments/decrements
that were made on the nudge field. This, along with the buffer values for
the devices that are controlled, is an indication of how far you have moved
the metadevice since the device page first appeared. The Buffer cell holds
the starting accumulation (0) and can be used to reset the metadevice back
to its initial setting by sending the buffer for the metadevice. This parallels
the use of the buffer for SLDs.
<p>Clicking on the meta device name with the right mouse button brings
up the Meta Device Editor. This editor allows you to view or modify the
definition of the meta device. It also allows you to test the changes you
have made to the meta device. For further information on the Meta Device
Editor, choose Show Help Document from the Help menu in the editor window.
<center><img SRC="MetaDevice.gif" ></center>

<p><a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="WorkingWithParameters"></a>Working with Parameters</h2>
A parameter is similar to an SLD in that it contains a setpoint and one
or more command fields. However, it differs in a few important ways. First,
parameters are not stored in hardware like SLDs, they are stored in the
database. There are no controllers or stations associated with parameters.
Also, parameters do not have statuses.
<p>Most parameters are associated with function generators and were initially
designed to create functions that would eventually be sent to hardware.
More recently, functions are created and edited with the FunctionEditor
or using function editor tools in application programs. However, many of
the older functions are still created using parameters. This is still the
primary use of parameters, but there is nothing inherent in the parameter
design that prevents them from being used for other purposes.
<p>control displays parameters in the same basic format as SLDs are
displayed. The setpoint and command fields look and behave the same as
for SLDs. Parameter data is retrieved from the database on a timer every
10 seconds. The indicator column # signs change with each update. Editing
parameters is done the same way as editing SLDs. Sending out a new setpoint
or command updates that field in the database and may send down a function
to hardware depending on the parameter and whether the CTRL parameter is
set to ON.
<p>Other functionality for parameters follows that for SLDs. Clicking on
the parameter name with the right mouse button causes a description of
the parameter to appear. All buffer functionality is operational for parameters.
The user can send one or more buffer rows, save/load from temp, or load
the buffer from an archive. Incrementing/Decrementing parameters is also
supported.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="WorkingWithKnobPanel"></a>Using the Knob Panel</h2>
A knob panel is a physical device attached through an sio line to a computer
used for the purpose of 'knobbing' (modifying) values for a device through
the use of a knob. The panel is presently used by Tandem operations. control
uses the knob panel if and only if the control application is started
with a '-knob' switch.
<p>A user can 'knob' devices on a page if a knob file is found for the
device list. When the page is active (has focus), the knob number will
be placed in the indicator column and the user may knob the setpoint. Once
the page is made inactive, the knob panel is disabled.
<p>There may be two knob files present in the directory containing the
device list. If this is the case, the page menu will be modified to allow
the user to switch between the two knob files. If the primary knob file
(.knob) is found, it will be used by default. If only the seconday knob
file is found (.knob1), it will be used.
<p>A user may maintain multiple pages to be knobbed on the terminal at
one time. As the user switches between the pages, the user will be able
to determine, both through the knob panel LCD display, and the knob numbers
present in the indicator column, which page is currently supported by the
knob panel.
<p>As a user modifies the setpoint through the use of a knob, the corresponding
value on the page will be updated and the value will be sent to the hardware
for the device. As values are returned from the station for the device,
the knob panel display is updated as well. An indication that a value is
being knobbed will be that the setpoint cell for the device being knobbed
will be highlighted.
<p>The knob panel has a restore button for each device. Pushing the restore
button will cause the value displayed in the buffer column for the device
to be restored.
<p>The knob panel also provides slow and fast buttons for each device.
The slow and fast buttons are typically used to alter the 'sensitivity
of the knob'. That is, using fast sensitivity modifies the value a greater
amount than using slow sensitivity for equal knob movement. The fast button,
however, has been overloaded to provide another purpose. It can cause a
knob to be 'tied' to another knob. This will cause equivalent values to
be sent to two devices when moving the value of one knob. At present, this
has to be memorized by the user for each page, or the user will notice
this at the time the knob is moved.
<p><a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="UserInterfaceReference"></a>User Interface Reference</h2>
This section describes each menu item on the control main window and
on the Device Pages. Other user interface descriptions have already been
provided in the sections above.
<h4>
<a NAME="MainWindowMenu"></a>Main Window Menu Item Descriptions</h4>
These descriptions are also available by pressing and holding the right
mouse button over the menu item.
<dl>
<dt>
<b><u>Setup</u></b></dt>

<dl>
<dt>
<b>Set Host...</b></dt>

<dd>
Sets the current host for this program. This sets the node responsible
for routing control system information from devices to this program.</dd>

<dt>
<b>Default PPM User...</b></dt>

<dd>
Sets the default PPM user for this program. The default PPM user is used
as the PPM user for any new device lists that are displayed. It does not
affect existing device pages.</dd>

<dt>
<b>Exit...</b></dt>

<dd>
Exits this program after a confirmation.</dd>
</dl>

<dt>
<b><u>Page</u></b></dt>

<dl>
<dt>
<b>Find</b></dt>

<dd>
Clears the machine tree keyboard selection area, readying the program for
a new selection either using the mouse or the keyboard.</dd>

<dt>
<b>New</b></dt>

<dd>
If a leaf node is selected on the machine tree table, creates a new device
page for that node. This does the same thing as clicking on the node with
the 2nd mouse button.</dd>

<dt>
<b>Show</b></dt>

<dd>
Brings the currently selected page to the front and makes it visible if
not already.</dd>

<dt>
<b>Hide</b></dt>

<dd>
Hide (make invisible) the currently selected page in the list. This takes
the page off the screen, but leaves it in the list. You can then show it
by choosing the Show menu item.</dd>

<dt>
<b>Close</b></dt>

<dd>
Closes the currently selected device page.</dd>

<br>&nbsp;
<p>&nbsp;
<dt>
<b>Close All...</b></dt>

<dd>
Closes all devices pages after issuing a confirmation.</dd>

<br>&nbsp;
<p>&nbsp;</dl>

<dt>
<b><u>Options</u></b></dt>

<dl>
<dt>
<b>Search...</b></dt>

<dd>
This option allows the user to search for a particular device. A prompt
will ask for a search string, which could be a partial device name. The
result of the search will then be displayed allowing the user to view the
device in one or more device lists.</dd>

<dt>
<b>Read Archive Log</b></dt>

<dd>
Brings up a separate window allowing the user to view the log of archives
that have been made with the archiving system.</dd>

<dt>
<b>CLDs...</b></dt>

<dd>
Brings up a 'cld window' allowing the user to set values and/or view measurements
for CLDs.</dd>

<dt>
<b>CLD Events...</b></dt>

<dd>
Brings up a 'cld window' allowing the user to set timing events for CLDs.</dd>
</dl>
</dl>
<a href="#TableOfContents">Back to Table of Contents</a>
<h4>
<a NAME="DevicePageMenu"></a>Device Page Menu Item Descriptions</h4>
These descriptions are also available by pressing and holding the right
mouse button over the menu item.
<dl>
<dt>
<b><u>Page</u></b></dt>

<dl>
<dt>
<b>Operational Mode</b></dt>

<dd>
Selecting this items causes the program to display only those columns that
are useful for operations.</dd>

<dt>
<b>Engineering Mode</b></dt>

<dd>
Selecting this items causes the program to display all columns, including
those that are pertinent to operations, engineering and diagnostic users.</dd>

<dt>
<b>Set PPM User...</b></dt>

<dd>
Allows the user to set the PPM user displayed on this device page only.</dd>

<dt>
<b>Reload</b></dt>

<dd>
Reloads the devices for the current device page.</dd>

<dt>
<b>Duplicate...</b></dt>

<dd>
Creates a duplicate of this device page. The user is first prompted for
the PPM user to display on the duplicate page.</dd>

<dt>
<b>Print</b></dt>

<dd>
This is now a sub-menu which includes global print options (available for
all Control's applications), as well as application specific print options
(Print Visible and Print All).</dd>

<dt>
<b>Hide</b></dt>

<dd>
Makes the window invisible, but still leaves it in the Page List on the
main control window.</dd>

<dt>
<b>Close</b></dt>

<dd>
Closes this device page without a confirmation.</dd>
</dl>

<dt>
<b><u>Device</u></b></dt>

<dl>
<dt>
<b>Description...</b></dt>

<dd>
Allows the user to view and edit database description for the current device
as well as view the ddf details.</dd>

<dt>
<b>Show All PPM Users</b></dt>

<dd>
Brings up a separate window displaying the current device for all PPM users.</dd>

<dt>
<b>Show CLD Editor</b></dt>

<dd>
Brings up a new window which let the user view and/or edit CLD setpoints,
measurements, commands and statuses. CLD reports are updated continuously.</dd>

<dt>
<b>View\Edit Metadevice</b></dt>

<dd>
Brings up the metadevice editor for the currently selected metadevice.
If no metadevice is selected, a blank metadevice editor is displayed.</dd>
</dl>

<dt>
<b><u>Setpoint</u></b></dt>

<dl>
<dt>
<b>Decrement</b></dt>

<dd>
Decrements the setpoint for the current device by the nudge value. This
is the same as clicking on the nudge value with the right mouse button.</dd>

<dt>
<b>Increment</b></dt>

<dd>
Increment the current device setpoint by the nudge value. This is the same
as clicking on the nudge value using the left mouse button.</dd>

<dt>
<b>Send (Return or Enter key)</b></dt>

<dd>
Sends the current setpoint to the device hardware. This is the same as
clicking on the setpoint value with the middle mouse button.</dd>
</dl>

<dt>
<b><u>Nudge</u></b></dt>

<dl>
<dt>
<b>Edit...</b></dt>

<dd>
Allows the user to edit the nudge value for the current device. This does
not permanently store this value in the database.</dd>

<dt>
<b>Edit All...</b></dt>

<dd>
Allows the user to enter a nudge value that will be put in the nudge cell
for all devices on this device page. This does not permanently store these
values in the database.</dd>

<dt>
<b>Save</b></dt>

<dd>
Permanently stores the nudge value for the current device into a file.
No confirmation.</dd>

<dt>
<b>Save All...</b></dt>

<dd>
Permanently stores the nudge values for all devices on the device page
into a file after a confirmation.</dd>
</dl>

<dt>
<b><u>Buffer</u></b></dt>

<dl>
<dt>
<b>Send...</b></dt>

<dd>
Sends the contents of the buffer to the device hardware, making these values
the current values. A confirmation appears before sending the values.</dd>

<dt>
<b>Send Device</b></dt>

<dd>
Sends the contents of the buffer for the current device to hardware.</dd>

<dt>
<b>Save Temp. File</b></dt>

<dd>
Saves the current data into a temporary file. This data can later be retrieved
using the Load from Temp menu option. There is one temp. file in the system
for each device list.</dd>

<dt>
<b>Load from Current</b></dt>

<dd>
Loads the buffer columns from the current setpoint and command columns.</dd>

<dt>
<b>Load from Temp. File</b></dt>

<dd>
Loads the buffer columns from setpoint and command data stored in the temp.
file. There is one temp. file in the system for each device list.</dd>

<dt>
<b>Load from Archive...</b></dt>

<dd>
Loads the buffer columns from data stored in a user selected archive file.</dd>

<dt>
<b>Load Global Command...</b></dt>

<dd>
Loads a command into one of the buffer command fields for all devices on
this device page.</dd>

<dt>
<b>Load Global Setpoint...</b></dt>

<dd>
Loads a setpoint into the buffer for all devices on this device page.</dd>

<dt>
<b>View Load Buffer Results...</b></dt>

<dd>
Displays a non-blocking popup with the results of the last buffer load.</dd>

<dt>
<b>View Send Buffer Results...</b></dt>

<dd>
Displays a non-blocking popup with the results of the last buffer send.</dd>
</dl>

<dt>
<b><u>Diagnostics</u></b></dt>

<dl>
<dt>
<b>Show Device Units</b></dt>

<dd>
When selected, the extra columns displayed in engineering mode show values
in devices units (CNTS = counts) rather than engineering units.</dd>

<dt>
<b>Show Engineering Units</b></dt>

<dd>
When selected, the special columns shown when in engineering mode, show
engineering units like mA, V, instead of device units (counts).</dd>
</dl>
</dl>
<a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="FAQ"></a>Frequently Asked Questions</h2>
<b>How do I add or remove items from a device list?</b>
<blockquote>Note that the Machine Tree and its associated device lists
are under the control of the Operations group. Any changes should be made
only after obtaining permission from Operations. To edit an existing device
list, use the ArchiveManager program. This program can be started using
StartUp under the General Programs section. Once started, choose select
the leaf that you wish to edit from the Machine Tree on that program, then
choose Device List from the Options menu. A new window will appear showing
you the existing device list. Click the Edit button, make your changes,
then click the Save button.</blockquote>
<b>How do I change the Machine Tree?</b>
<blockquote>The Machine Tree is under the strict control of the Operations
group and should only be changed by a member of that group.</blockquote>
<b>What are the major differences between the latest version of control
and the old Apollo version?</b>
<ul>
<li>
The new control operates with a Main Window and one or many Device
Pages. The main window always displays the Machine Tree, allowing you to
select a new device list at any time. The selected devices will then replace
the devices in the current device page if the list is selected with the
1st mouse button, or be included in a newly created device page if the
list is selected with the 2nd mouse button. As many device pages can be
created as desired.</li>

<li>
Each device page contains an entire device list in a scrolling table. The
window can be resized to display more or fewer devices from the list. Blank
lines in the device_list file, which were used to signify page breaks,
are now seen as blank rows in the table. The window scrolls and can be
resized horizontally as well to view different columns. Initially the device
page comes up in Operational Mode, displaying only measurement, setpoint,
command, status, nudge and buffer columns. To see additional columns, choose
Engineering Mode from the Page menu.</li>

<li>
Each newly created device page inherits the PPM user from the default PPM
user. The default PPM user is set from the main window. A menu item on
the device page can then be used to change the PPM user if desired. All
devices on a device page use the same PPM user, but each device page can
have a different PPM user. The same device list can be displayed for different
PPM users on different device pages.</li>

<li>
Editing of SLD setpoints is done right in the cell. First highlight the
cell by clicking on it or by using the keyboard arrow keys to move to it.
Then type in the new value. Hitting the RETURN or ENTER key on the keyboard
or clicking on the cell with the middle mouse button sends down the value.</li>

<li>
Commands are edited via a cell menu. Click on the cell with the left mouse
button to see the list of possible commands and make a selection. The command
is sent down immediately upon selection.</li>

<li>
A new Nudge column appears next to the Setpoint column. This is the value
used to increment or decrement the associated setpoint. Clicking on the
nudge cell with the 1st mouse button performs a decrement, while clicking
with the 3rd mouse button performs an increment. A click with the middle
mouse button brings up a popup for editing the value. A Nudge menu allows
you to edit all nudge values on a device page. The menu also has options
for saving the current value or values to the permanent storage so that
they can be used as initial values the next time this device list is opened.</li>

<li>
As with other AGS X Window programs, the right mouse button is used to
get help or retrieve additional information about an item on the user interface.
Each menu item has right mouse button help (press and hold the right mouse
button over the item). Pressing the right button on a device name will
cause device information to be displayed. The device description can be
edited here.</li>

<li>
The Buffer columns have behavior similar to the old control except
that these columns are now editable. This permits, for example, loading
new device settings for a number of devices and sending these new values
to hardware simultaneously.</li>

<li>
CLDs can be viewed and/or edited with this version of control. The
CLD can be selected either thru the Options menu on the main window, or
by clicking on a CLD name within a displayed device list. See <a href="#WorkingWithClds">Working
with CLDs</a> for more information.</li>
</ul>
<a href="#TableOfContents">Back to Table of Contents</a>
<h2>
<a NAME="Glossary"></a>Glossary of Terms</h2>

<dl>
<dt>
<b>SLD</b></dt>

<dd>
Simple Logical Device. One of the basic data structures of the AGS Control
system, an SLD consists of zero or one setpoint, zero or one measurement,
up to 8 commands and up to 16 statuses.</dd>

<dt>
<a NAME="WhatIsCLD"></a><b>CLD</b></dt>

<dd>
Complex Logical Device. One of the basic data structures of the AGS Control
system, a CLD consists of any number of setpoints, any number of measurements,
up to 8 commands and up to 16 statuses. See also <a href="#WorkingWithClds">Working
with CLDs</a>.</dd>

<dt>
<b>Parameter</b></dt>

<dd>
A parameter is similar to an SLD in that it contains a setpoint and one
or more command fields. However, it differs in a few important ways. First,
parameters are not stored in hardware like SLDs, they are stored in the
database. There are no controllers or stations associated with parameters.
Also, parameters do not have statuses. See also <a href="#WorkingWithParameters">Working
with Parameters</a>.</dd>

<dt>
<b>MetaDevice</b></dt>

<dd>
Meta devices are special devices which can control many other devices (SLDs,
CLDs, or Parameters). How these devices are linked is stored in the database.
Each metadevice has a name and an associated function, which it applies
to each of its meta member devices. See also <a href="#WorkingWithMetaDevices">Working
with MetaDevices</a>.</dd>

<dt>
<b>Nudge</b></dt>

<dd>
Moving a setpoint up or down by a fixed amount. The amount of movement
is called the nudge value. It is usually a small percentage of the setpoint
value. See also <a href="#Nudging">Nudging (Increment/Decrement)</a>.</dd>

<dt>
<b>Buffer</b></dt>

<dd>
An area on a device page which can be used to buffer a setpoint and up
to 3 commands. When the page is loaded it holds the initial values for
devices on that page. Buffer values can be reloaded from various places
or send directly to hardware. See also <a href="#UsingTheBuffer">Using
the Buffer</a>.</dd>
</dl>
<a href="#TableOfContents">Back to Table of Contents</a>
</body>
</html>
