<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Program Overview: The CLD Interface</title>
</head>
<body>
<center>
<h1>Program Overview: The CLD Interface </h1>
</center>
<hr>
<p> This document describes the CLD Interface that is used to view and
edit the Complex Logical Devices (CLDs) of the AGS complex. </p>
<p> </p>
<center>
<table width="85%" border="2" cellpadding="4">
  <tbody>
    <tr>
      <td colstart="1"> <br>
      </td>
      <th>Date </th>
      <th>Author </th>
      <th>Email </th>
    </tr>
    <tr>
      <th align="left">Program Created </th>
      <td align="center">3/31/97 </td>
      <td align="center">Jon Laster </td>
      <td align="center"><a href="mailto:laster@bnl.gov">laster@bnl.gov</a></td>
    </tr>
    <tr>
      <th align="left">Last Modified </th>
      <td align="center">7/1/03 <br>
      </td>
      <td align="center">Seth Nemesure <br>
      </td>
      <td align="center"><a href="mailto:seth@bnl.gov">seth@bnl.gov</a></td>
    </tr>
  </tbody>
</table>
</center>
<p> </p>
<h2><a name="TableOfContents">Table of Contents</a></h2>
<ul>
  <li><a href="#WhatisaCLD">What is a CLD?</a> </li>
  <li><a href="#AccessingfromSpreadSheet">Accessing CLDs from pet</a> </li>
  <li><a href="#ExplanationCLDWindow">Explanation of the CLDWindow</a> </li>
  <li><a href="#UsingTheCLDInterface">Using the CLD Interface</a>
    <ul>
      <li><a href="#CLDInterfaceMenu">The CLD Interface Menu</a> </li>
      <li><a href="#SetpointOnlyCLDs">Setpoint Only CLDs</a> </li>
      <li><a href="#ReadbackOnlyCLDs">Readback Only CLDs</a> </li>
      <li><a href="#SetpointReadbackCLDs">Setpoint and Readback CLDs</a> </li>
      <li><a href="#SetPPMUser">Set PPM User..</a> </li>
    </ul>
  </li>
  <li><a href="#CustomizingtheGenericCLDInterface">Customizing the
Generic CLD Interface</a>
    <ul>
      <li><a href="#ConstructionFiles">Construction Files</a> </li>
      <li><a href="#ConstructionParameterAttributes">Construction
Parameter Attributes</a> </li>
      <li><a href="#TunedCLDInterfaces">Tuned CLD Interfaces</a> </li>
    </ul>
  </li>
</ul>
<p> </p>
<hr>
<p> </p>
<h2><a name="WhatisaCLD">What is a CLD?</a></h2>
<p> CLDs are the Accelerator Controls Group's complex logical devices
(referred to hereafter as CLD).  The CLDs of the complex are used to
control many of the accelerator devices.  The term "control" in this
case refers to the ability to send setpoints and commands to CLDs, as
well as view readbacks and statuses of the CLDs. The CLDs of the AGS
complex are large in number, and are varied in nature.  A device may
have setpoints with no readbacks, readbacks with no setpoints, etc. 
Furthermore, the number of setpoints and/or readbacks each CLD may have
can vary.  There is yet another group of CLDs whose number of readbacks
may change, depending on the present state of the accelerators.  For
example, some instrumentation in the AGS Booster will return
information for each "User" cycle in the Booster.  If a "User" had
three cycles associated with it during one Supercycle, the report size
would contain information for all three cycles, obviously more than if
the Booster "User" had only one cycle. </p>
<p> </p>
<p> </p>
<h2><a name="AccessingfromSpreadSheet">Accessing CLDs from pet</a></h2>
<p> From a <a
 href="http://www.rhichome.bnl.gov/Controls/doc/pet/pet.html">pet</a>
page, you can set CLD settings and commands by choosing 'CLDs...' from
the Options menu on the main window. </p>
<p> </p>
<center><img src="./CLDWindow.gif" align="middle"> </center>
<p> A second method for viewing/editing CLD information is by clicking
on the name of a CLD on a Device Page using the middle mouse button. 
CLDs that are good candidates for viewing measurements and
viewing/editing setpoints typically have asterisks in the measurement
or setpoint columns, indicating that measurements or setpoints exist
for the CLD (clicking on the asterisks using the middle mouse button
will also make a new CLDWindow).  A new CLDWindow will present the
measurements and/or setpoints to the user for a CLD.  Commands for the
CLD may be edited in a device list that accompanies the CLD setpoints,
and statuses may be viewed as well. </p>
<p> To edit CLD events on the AGS or Booster time lines, choose Set CLD
Events... (note that selecting these by controller will bring up the
same editing tool) from the Options menu on the main window.  The
advantage to using Set CLD Events... is that only time-line controllers
will be presented in the list.  Select a time line to work with, and
then select a device on that time line.  A CLDWindow will appear for
the user to enter times and/or modify commands. </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<pre><p>  </p></pre>
<h2><a name="ExplanationCLDWindow">Explanation of the CLDWindow</a></h2>
<p> The Generic CLD interface has been designed with the dynamic nature
of CLDs in mind.  The interface will automatically determine, based upon
its first report from a CLD, the type of display that should be
created.  A formatted table will then display the desired information
to the user.  If setpoints are present, the user will have the ability
to send information to the CLD in order to modify the present set of
values. If only readbacks are present, the table will be read-only,
that is, the information may only be viewed by the user. </p>
<p> The Generic CLD interface has made use of existing tools to allow
the user to change commands and view statuses of CLDs (as well as other
SLDs, as will be mentioned later).  The interface will present a
"Device" table (more commonly known as a pet page) with the CLD device
to the user.  The user may then interact with the CLDs commands and
statuses as they regularly interact with SLDs in the Control system. </p>
<p> The "CLD" table will be displayed under the "Device" table and will
be the "important" part of the display.  In other words, if the "CLD"
table cannot be created, no part of the display will be created.  For a
"CLD" table to be created successfully, the name of the CLD device must
be correct (that is, it must match a CLD name in the device database)
and a report from the CLD must be obtained.<br>
NOTE: Most CLDs in the Controls' system will only give reports for
active users.  If the user is presented with an error message during
creation of a window, it is very likely that the user specified for the
CLD is not an active user. </p>
<p> The "CLD" table will be comprised of setpoints and/or readbacks with
names that precede the setpoint and readback columns.  If there are an
equal number of setpoint and readback columns, a one-to-one
correspondence is assumed and only the name of the setpoint is
displayed, with the header of the readback column indicating that it is
a readback column. </p>
<p> </p>
<center><b>Setpoint-Only CLD</b></center>
<p> </p>
<center><img src="./stpt.gif" align="middle"> </center>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p></p>
<pre><p>  </p></pre>
<center><b>Readback-Only CLD</b></center>
<p> </p>
<center><img src="./rdbk.gif" align="middle"> </center>
<p></p>
<pre><p>  </p></pre>
<center><b>Setpoints and Readback CLD</b></center>
<p> </p>
<center><img src="./stptrdbk.gif" align="middle"> </center>
<p> A "report arrived" column has been added to the table to indicate
that reports are actively being received and displayed in the table. 
Please note that not all CLDs obtain continuous reports. Therefore, it
is possible that the table and indicator column will not update for a
period of time greater than every Supercycle. </p>
<p> The indicator column is represented by # signs and changes color as
reports are received and placed in the table.  If the # sign turns red,
this indicates that a cycle was skipped (2 even cycles were reported in
a row), or 2 reports came in for the same cycle.  Certain CLDs (e.g.
timeline) do not support continuous reporting (for these CLDs, an
option has been placed in the menu to refresh ("Setup/Refresh") the
display, causing a new report to be requested). </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<pre><p>  </p></pre>
<p> </p>
<h2><a name="UsingTheCLDInterface">Using the CLD Interface</a></h2>
<p> </p>
<h4><a name="CLDInterfaceMenu">The CLD Interface Menu</a></h4>
<p> This section describes each menu item in the CLD Window.  These
descriptions are also available by pressing and holding the right
mouse button over the menu item. </p>
<dl>
  <dt><b><u>Setup</u></b> Pull-down menu options for window. </dt>
  <dd>
    <dl>
      <dt><b>Set PPM User...</b> </dt>
      <dd>Change the PPM User for which data is retrieved, and for
which 	setpoints/commands are sent. </dd>
      <dt><b>Immediate Send</b> </dt>
      <dd>A toggle indicating if the send button needs to be pressed to
	send modified setpoint values to the hardware.  The default 	of this
button may be modified in a construction file for the 	CLD.  The option
will only be enabled (may be selected) and the 	'Send' button will only
be visible if the CLD has setpoints. </dd>
      <dt><b>Refresh All</b> </dt>
      <dd>Force the window to update the	device list and the CLD Table.
 </dd>
      <dt><b>Refresh CLD Table</b> </dt>
      <dd>Force the CLD Table to get a report from hardware.  It will
try to 	reestablish continuous reports, but this will only work for
those 	CLDs that actually give continuous reports. </dd>
      <dt><b>Hide</b> </dt>
      <dd>Put the current window into an icon state, report collection
will 	be stopped. Report collection will be restarted	when the window
is 	again made visible. </dd>
      <dt><b>Close</b> </dt>
    </dl>
    <p> </p>
  </dd>
  <dt><b><u>Nudge</u></b> Nudge options affecting setpoints on the CLD
Table. </dt>
  <dd>
    <dl>
      <dt><b>Decrement</b> </dt>
      <dd>Decrement the selected cell/cells by the amount specified in
the 	nudge box. This option will only affect the cells in the CLD
Table. 	Affected cell/cells are determined by the setting of the radio
	buttons that indicate if all setpoint cells or the selected setpoint
	cell should be affected. </dd>
      <dt><b>Increment</b> </dt>
      <dd>Increment the selected cell/cells by the amount specified in
the 	nudge box. This option will only affect the cells in the CLD
Table. 	Affected cell/cells are determined by the setting of the radio
	buttons that indicate if all setpoint cells or the selected setpoint
	cell should be affected. </dd>
      <dt><b>Selected setpoint cell</b> </dt>
      <dd>All nudge increments/decrements should	affect the value of
the 	selected setpoint cell of the CLD Table only. </dd>
      <dt><b>All setpoint cells</b> </dt>
      <dd>All nudge increment/decrements should affect the value of all
of 	the setpoint cells for the CLD Table. </dd>
      <dt><b>Save</b> </dt>
      <dd>Save the value in the nudge box to the database.  The stored
value 	      will be placed in the nudge box whenever a new cld window
	 is created. </dd>
    </dl>
    <p> </p>
  </dd>
  <dt><b><u>Edit</u></b> Options that allow edited cells to be returned
to initial state. </dt>
  <dd>
    <dl>
      <dt><b>Undo cell</b> </dt>
      <dd>Restore the value of the current selected setpoint cell to
the 	last value obtained from the station. </dd>
      <dt><b>Undo all</b> </dt>
      <dd>Restore the value of all of the setpoint cells to the last
values 	obtained from the station. </dd>
    </dl>
    <p> </p>
  </dd>
  <dt><b><u>Buffer</u></b> Options that affect the buffer column for the
device list and the CLD table. </dt>
  <dd>
    <dl>
      <dt><b>Device List</b> </dt>
      <dd>
        <dl>
          <dt><b>Send...</b> 	 </dt>
          <dd>Send the setpoints and commands of the devices in the
Device List         	to the hardware. </dd>
          <dt><b>Send Device</b> 	 </dt>
          <dd>Send the value of the buffer for the selected device in
the            Device List to the hardware. </dd>
          <dt><b>Load from Current</b> 	</dt>
          <dd>Load the buffer of the Device List with the current
values for all 	   devices. </dd>
        </dl>
      </dd>
      <dt><b>CLD Table</b> </dt>
      <dd>
        <dl>
          <dt><b>Send...</b> 	 </dt>
          <dd>Send the values in the buffer of the CLD Table to the
setpoints and 	    the hardware. </dd>
          <dt><b>Load from Current</b> 	 </dt>
          <dd>Load the CLD Table buffer from the values shown in the
setpoints.] </dd>
          <dt><b>Load from Archive...</b> 	 </dt>
          <dd>Load values from an archive into the buffer of the CLD
Table. </dd>
        </dl>
      </dd>
    </dl>
  </dd>
</dl>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> </p>
<h4><a name="SetpointOnlyCLDs">Setpoint Only CLDs</a></h4>
<p> The user is presented with 3 sections on the interface. A device
table on the top (which will contain the CLD by default, unless
overridden), a section for sending the setpoints and nudging the
setpoints, and a CLD table, that is the basic interface for modifying
the setpoints to be sent to the CLD. </p>
<p> Please refer to <a
 href="http://www.rhichome.bnl.gov/Controls/doc/pet/pet.html#TheDevicePageWindow">
The Device Page Window</a> document for information on using the top
table. The bottom CLD table contains rows for the setpoints that may
be sent to the device.  Depending on the type of CLD, strings from the
database may be present to provide additional information about each
setpoint. Otherwise, a default string is displayed to the user.  When
default strings are displayed to the user, it is assumed that the user
has some familiarity with the device that is being tuned.  This is due
to the myriad of CLD types that are present in our system, each of
which has different styles for sending commands and counts of commands. </p>
<p> Setpoints may be edited by selecting a cell and entering a new
value. By default, the user must press the "Send Setpoints" button to
send any setpoints to the device.  The user may override this by
selecting the "Setup/Immediate Send" option from the menu.  The "Send
Setpoints" button is then disabled (and relabeled Auto-Send),
indicating that setpoints will be sent down immediately.  Edited
setpoints are colored to indicate that they are not the setpoints as
read from the device.  A buffer column is present to indicate a
starting point (or possibly an intermediate state if the user fills the
buffer after the window has been displayed).  The buffer column is NOT
reloaded when a window is active and its PPM user is modified.  This
was an operational decision, and easily allows the user to determine
differences in setpoints among the devices users.  The user may restore
any or all edited cells by using the appropriate option under the "Edit"
menu. </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> <u><a name="NudgingSetpoints">Nudging Setpoints</a></u> </p>
<p> A "Nudge box" is available for globally modifying all of the
setpoint cells, or individual setpoint cells.  The distinction for
which setpoint cells will be affected by the nudge is determined by the
setting of the "Nudge" menu option. The nudge value may be modified by
clicking on the value using the middle mouse button.  A popup for the
user to enter a value will be displayed.  The value displayed to the
user will be the value used when the nudge is incremented or
decremented. The value may be incremented or decremented three different
ways. </p>
<blockquote> <b>Decrement</b>
  <ul>
    <li>Click on nudge value with the left mouse button </li>
    <li>Click on down arrow with the left mouse button </li>
    <li>Select Nudge/Decrement menu option </li>
  </ul>
  <p> <b>Increment</b> </p>
  <ul>
    <li>Click on nudge value with the right mouse button </li>
    <li>Click on up arrow with the left mouse button </li>
    <li>Select Nudge/Increment menu option </li>
  </ul>
</blockquote>
<p> <u><a name="BufferColumn">Buffer Column for Setpoints</a></u> </p>
<p> The buffer may be modified by the user and may be sent to the
setpoints by the use of the middle mouse button.  The buffer may also
be sent to the setpoints and the hardware by using the Buffer/Send
option for the CLD Table from the menu.  Note that buffer options have
also been provided for the device list.  These options work in the same
manner as buffer options do on standard pet pages. </p>
<p> <b>The buffer may be loaded from archives that contain the desired
cld. A list of archives (listed by run name) is presented to the user
from which the buffer may be loaded.</b> </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> </p>
<h4><a name="ReadbackOnlyCLDs">Readback Only CLDs</a></h4>
<p> A device list (upper table) and CLD table will be displayed.  There
will be no "Send Setpoints" button or Nudge box displayed.  The CLD
table cannot be modified because the values are all readbacks. </p>
<p> </p>
<h4><a name="SetpointReadbackCLDs">Setpoint and Readback CLDs (one CLD)</a></h4>
<p> The setpoints and readbacks are displayed to the user.  If there are
equal numbers of setpoints and readbacks, they are displayed together.
If there are not equal numbers, the setpoints are displayed first,
followed by any readbacks. </p>
<p></p>
<center> <img src="./timing0stpts.gif">
<p> <img src="./timing1stpts.gif"> </p>
</center>
<p> See the section <a href="#SetpointOnlyCLDs">Setpoint Only CLDs</a>
for explanation of how to modify and send setpoints to the device. </p>
<p> </p>
<h4><a name="SetPPMUser">Set PPM User..</a>.</h4>
<p> As is common among AGS Complex Controls applications, devices that
are controlled have PPM User specific information associated with it. 
The window will be created with the user number of the Main pet window.
The user may change the PPM User by using the Setup/Set PPM User menu
option.  Please note that many CLDs do not report for PPM Users that
are not active.  In the event that no report is received for a PPM
User, a message indicating that the window cannot update, that no
reports can be received will appear.  The user will have the option of
closing the window, or reinitiating requests for the initial PPM user. </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<pre><p>  </p></pre>
<h2><a name="CustomizingtheGenericCLDInterface">Customizing the Generic
CLD Interface</a></h2>
<p> The user also has the capability of adding SLDs to the "Device"
table. This will be very valuable for tuning CLDs with associated SLDs.
For example, some devices have multiple setpoints to be controlled, but
their on/off status may be controlled by an SLD. </p>
<p> The GenericCLD interface was used as a base display for controlling
all of the AGS Complex's CLDs.  The need became apparent to establish
more useful displays for operations, that is, displays that provided
operations with some built-in processing, rather than being purely a
display.  The present mechanism for customizing a display for a
particular CLD is to build a driver file that drives the creation of
the user interface. The user must be extremely careful when creating
the driver files, because the underlying processing mechanism of how
commands are sent to and received from controllers is completely hidden
from the user.  Sending certain setpoints in an improperly designed
"custom" display could be dangerous if the developer of the file has
somehow created an interface that could cause improper setpoints to be
sent to a device. </p>
<p> The files for customizing the GenericCLD interface are placed in the </p>
<blockquote> <code>/operations/app_store/GenericCld/data/files</code> </blockquote>
area.  The first file of interest in this area is called
"Construct_Filelist".  This file maps the name of the CLD (whose user
interface display is desired) to the location of the driver file.  The
"Construct_Filelist" will eventually be used to allow different users
to create their own personal driver files for the same CLD.  Presently,
the creation of a CLD will always use the same driver file, regardless
of user.
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> </p>
<h4><a name="ConstructionFiles">Construction Files</a></h4>
<p> Once the request is made for the CLD window to be displayed, the
"Construct_Filelist" is read to determine if the CLD has a driver file.
If no driver file is present, the "Device" table will fill in with the
CLD by default, and the "CLD" table will use its default setup. If a
driver file is present, the attributes of the file will specify how the
CLDWindow will be displayed. </p>
<p> </p>
<h4><a name="ConstructionParameterAttributes">Construction Parameter
Attributes</a></h4>
<p> The file that drives the CLD interface contains attributes.  Each
attribute has some significance in causing the display to act in a
certain manner. </p>
<p> The "Device" table will fill in with the CLD by default, unless a
switch is used in the file indicating that the CLD should not be
included in the display.  Furthermore, any additional devices specified
in the file will also be displayed in the "Device" table. </p>
<p> The contents of the files depends on the type of CLD. Some
attributes are not beneficial depending on the type of CLD.  In fact,
some attributes could be "dangerous" to use if the resultant
UICldObjectWindow is constructed with improper information. </p>
<p> First, the application will look in the directory </p>
<blockquote> <code>/operations/app_store/GenericCld/data/files</code> </blockquote>
for the file Construct_Filelist.  If the file is not found, the
"generic" CLDdisplay will be presented to the user, along with an
AgsPage Table in the window, with only the CLD name, for control of any
related commands, and viewing of any related statuses.
<p> The same result will occur if the file Construct_Filelist is found,
but the name of the CLD being created is not present in the file,
mapping a file to use during the creation of the CLD window. </p>
<p> If the Construct_Filelist is found, and the name of the CLD is found
with a matching file to use for the creation of the CLD window, the
following will occur. </p>
<p> The file for the CLD will be examined.  The display for the CLD
control will examine the attributes in the file for determining the
type of display.  During creation of the files, the user must be
knowledgeable about the report format.  The various attributes are
based on the layout of the reports for the CLDs.  The following
attributes are examined by the application: </p>
<p> <b>For the UICldObject</b> </p>
<p>
<table border="1" cellpadding="4">
  <tbody>
    <tr>
      <th>Attribute Type </th>
      <th>Attribute Name </th>
      <th>Attribute Possible Values </th>
    </tr>
    <tr>
      <td>switch			 </td>
      <td>useSendButton </td>
      <td>
      <center>ON/OFF</center>
	Determines if the setpoint values on the page will 	 be sent down by
default or requires the pressing of 	 send button to send all values at
the same time. </td>
    </tr>
    <tr>
      <td>string </td>
      <td>uiCldTableType </td>
      <td>
      <center>Default: UICldTableType/UICldTableWithFactorType</center>
Determines if the table displayed (if it contains 	 setpoints) will
allow the user to enter a factor that 	 is relative to a displayed main
setpoint value. </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>useDefaultDevice </td>
      <td>
      <center>ON/OFF</center>
	Determines if the AgsPageTable displaying SLDs and CLDs 	 will display
the main CLD (the one that started this window 	 to begin with) in the
table <br>
NOTE: this is defaulted 	 to ON (always display), unless the file
exists and has 	 this attribute set to OFF! </td>
    </tr>
    <tr>
      <td>string </td>
      <td>device# </td>
      <td>
      <center>'device_name_string'</center>
	Specifies the devices to be displayed in the AgsPageTable 	 portion of
the UICldObjectWindow.  The devices must be 	 numbered from 1 to n. 
The devices do not have to be listed 	 in sequential order. NOTE: if a
number between 1 to n is 	 not in the file, subsequent device numbers
will be ignored, 	 leaving desired strings out of the table! </td>
    </tr>
    <tr>
      <td>string </td>
      <td>cellsToNudge </td>
      <td>
      <center>allSetpointCells/selectedSetpointCell</center>
	Determines if the nudge will initially work on all of the 	 setpoint
cells in the table, or only on the individual 	 setpoint cell that has
focus. </td>
    </tr>
    <tr>
      <td> switch		 </td>
      <td>showAgsPage<sup>*</sup> </td>
      <td>
      <center>ON/OFF</center>
	Determines if the AgsPageTable should be displayed in the 	
UICldObjectWindow by default. </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>showCldTable<sup>*</sup> </td>
      <td>
      <center>ON/OFF</center>
	Determines if the CLDTable should be displayed in the 	
UICldObjectWindow by default. </td>
    </tr>
  </tbody>
</table>
</p>
<p> <sup>*</sup> Not Presently Available </p>
<p> <b>For the UICldTable</b> </p>
<p>
<table border="1" cellpadding="4">
  <tbody>
    <tr>
      <th>Attribute Type </th>
      <th>Attribute Name </th>
      <th>Attribute Possible Values </th>
    </tr>
    <tr>
      <td>switch			 </td>
      <td>firstSetpointIsCountOffset </td>
      <td>
      <center>ON/OFF</center>
	Specifies that the first setpoint of the CLD is 	 the number of
setpoints to be sent down.  The 	 count of the setpoint values on the
page will 	 be sent down by default or requires the pressing of 	 the
send button to send all values at the same time. </td>
    </tr>
    <tr>
      <td>switch			 </td>
      <td>isATimeLineCld </td>
      <td>
      <center>defaultUICldTableType</center>
	Specifies if the CLD is a time line CLD, requiring the 	 display to
show more setpoints (possibly), than is read 	 back from the device
controller.  This will allow the 	 user to enter additional times if
necessary. </td>
    </tr>
    <tr>
      <td>integer </td>
      <td>maxTimeLineSetpoints </td>
      <td>
      <center>####</center>
	Valid only for a timeLineCLD, this specifies the 	 maximum number of
setpoints (including the count attribute) 	 to display to the user that
may be entered. 	 </td>
    </tr>
    <tr>
      <td>string			 </td>
      <td>useForDefaultSetpointString </td>
      <td>
      <center>'default_setpoint_string'</center>
	Specifies the string to be displayed for setpoints, in the case 	 that
the string is not found from CPX (for CPX devices), and/or 	 the user
wishes to not use the default ("Index #"). </td>
    </tr>
    <tr>
      <td>string			 </td>
      <td>useForDefaultMeasurementString </td>
      <td>
      <center>'default_measurement_string'</center>
	Specifies the string to be displayed for measurements, in the case 	
that the string is not found from CPX (for CPX devices), and/or 	 the
user wishes to not use the default ("Index #"). </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>useDefaultSetpointStringForAllSetpoints </td>
      <td>
      <center>ON/OFF</center>
	Specifies that the string passed in the attribute
useForDefaultSetpointString 	 should be used for all setpoints, not
only the ones the CPX does not specify. </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>useDefaultMeasurementStringForAllMeasurements </td>
      <td>
      <center>ON/OFF</center>
	Specifies that the string passed in the attribute
useForDefaultMeasurementString 	 should be used for all setpoints, not
only the ones the CPX does not specify. </td>
    </tr>
    <tr>
      <td>string			 </td>
      <td>useForReadbackDevice </td>
      <td>
      <center>'a readback CLD name'</center>
	Specifies a string that is a CLD, whose values will be used to
represent the 	 measurements (readbacks) in the CLDTable. </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>truncateAtMinimum </td>
      <td>
      <center>ON/OFF</center>
	Specifies that the minimum setpoint value may not be less than the
minimum 	 entered for the cell.  The minimum value is determined by the
database per 	 CLD data item.  Any value entered (or nudged) below the
minimum setpoint 	 will be truncated to the minimum value. </td>
    </tr>
    <tr>
      <td>switch </td>
      <td>truncateAtMaximum </td>
      <td>
      <center>ON/OFF</center>
	Specifies that the maximum setpoint value may not be more than the
maximum 	 entered for the cell.  The maximum value is determined by the
database per 	 CLD data item.  Any value entered (or nudged) above the
maximum setpoint 	 will be truncated to the maximum value. </td>
    </tr>
  </tbody>
</table>
</p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> </p>
<h4><a name="TunedCLDInterfaces">Tuned CLD Interfaces</a></h4>
<p> <a name="TunedCLDInterfaces">At present, three types of 'common'
CLDs have been identified.  Modified CLD interfaces have been provided
for each one, based upon their specific needs.  The way in which the
CLDs realize the modified interface is through the use of the 'driver'
file for the specified CLD (based on its name). </a></p>
<p> <a name="TunedCLDInterfaces">The three types of 'common' CLDs that
have been identified are: </a></p>
<ul>
  <a name="TunedCLDInterfaces"> <li> BTA supplies, separate setpoint and
readback CLDs. </li>
  <li> FEB supplies, setpoints and readbacks, with a count to specify
the    valid number of setpoints and readbacks. </li>
  <li> TimeLine CLDs, whose total number of setpoints returned are not a
 valid indication of the number of setpoints that may be sent down.   
This is also termed a dynamic setpoint CLD. </li>
  </a>
</ul>
<p> <a name="TunedCLDInterfaces"><u>Tuned CLD Interface - BTA supplies</u> </a></p>
<p> <a name="TunedCLDInterfaces">This interface has been created to
specially integrate the setpoints and readbacks into one common CLD
table.  It appears as if the reports are essentially obtained from the
same CLD.  Two additional features have also been supplied for this
interface type. </a></p>
<ul>
  <a name="TunedCLDInterfaces"> <li> A factor column has been provided,
to ease the manner in which operations may modify setpoints for each
Booster cycle for a particular user.  In order to make the factor
column more 'friendly', </li>
  <li>A 'Main Setpoint' region has also been provided, upon which the
factor column setting (and therefore, the setpoint) is based. </li>
  </a>
</ul>
<p> <a name="TunedCLDInterfaces">The initial main setpoint value is
created from the first non-zero setpoint number.  The other setpoints
are filled in, and then the factor is calculated from the setpoint
value and the main setpoint value. </a></p>
<p> <a name="TunedCLDInterfaces">The user may modify the factor value,
in which case a new setpoint is calculated, or the user may modify the
setpoint value, in which case a new factor is calculated.  Modifying
the main setpoint value will cause all setpoints to be recalculated
based upon the values of their factors. </a></p>
<p> <a name="TunedCLDInterfaces">The nudge implementation has been
"overloaded" to nudge setpoints based on the object with focus when the
nudge is initiated.  If the device table has focus, a message is
displayed to the user that a non-nudgeable object has focus.  If the
main setpoint has focus, the main setpoint will have its value nudged,
and then the setpoints will be recalculated based upon the new value of
the main setpoint and the individual factors.  If the CLD table has
focus, the setpoint(s) will be nudged in the default manner, that is,
in accordance with how the Nudge menu option has been specified. </a></p>
<p> <a name="TunedCLDInterfaces">The remainder of the CLD table
interface works the same as the default CLD interface. </a></p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
<p> <u>Tuned CLD Interface - FEB supplies</u> </p>
<p> This interface has been created to specially hide the use of sending
down a number of valid setpoints and readbacks to the user.  A maximum
number of setpoints and readbacks may always be sent and received. The
interface will always send this amount.  The readback column has been
modified slightly to indicate the number of setpoints that were
actually used.  A number is present wherever a valid measurement has
been read.  A dash is present wherever a bunch request was not
received, thereby indicating that the measurement is invalid.  This is
an indication of the number of FEB requests that were received on the
event link from the device controller. </p>
<p> The remainder of this interface is similar to the tuned CLD
Interface for the BTA supplies in that it too has the factor column and
main setpoint in its interface. </p>
<p></p>
<center> <img src="./stptrdbkcustom.gif"> </center>
<p> <u>Tuned CLD Interface - TimeLine CLDs</u> </p>
<p> This interface has been created to allow the user to send more
setpoints to the hardware than has been reported from the hardware. 
Based on the dynamic nature of this CLD interface, the number of
setpoints received may be less than the number of setpoints that can be
accepted by the hardware, in this case the real-time and gauss-line
generators.  This interface reads from the 'driver' file the maximum
number of setpoints that will be placed in the interface to allow the
user to modify.  The user must place the 'count' in the table, in order
for the interface to know the correct number of setpoints to send down. </p>
<p> It is imperative for the timeline CLD interface that the user not
override the 'Send setpoints' pushbutton, for if the count of setpoints
was sent down, and additional setpoints were not yet modified, unknown
results from expected time line events would ensue. </p>
<p> <a href="#TableOfContents">Back to Table of Contents</a> </p>
</body>
</html>
